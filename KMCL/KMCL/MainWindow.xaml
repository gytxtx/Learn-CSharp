<Window x:Class="KMCL.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        
        xmlns:materialDesign="http://materialdesigninxaml.net/winfx/xaml/themes"
        Style="{StaticResource MaterialDesignWindow}"

        
        xmlns:local="clr-namespace:KMCL"
        mc:Ignorable="d"
        Title="KMCL MainWindow" Height="450" Width="800">
    <!-- FontFamily="{materialDesign:MaterialDesignFont}" -->
    <!-- FontFamily="pack://application:,,,/MaterialDesignThemes.Wpf;component/Resources/Roboto/#Roboto" -->
    <Window.Resources>
        <!-- BooleanToVisibilityConverter -->
        <BooleanToVisibilityConverter x:Key="BooleanToVisibilityConverter" />

        <!-- SolidColorBrushOpacityConverter -->
        <local:SolidColorBrushOpacityConverter x:Key="SolidColorBrushOpacityConverter" />
    </Window.Resources>

    <Grid>
        <!-- 主体内容区域 -->
        <Grid HorizontalAlignment="Left" VerticalAlignment="Bottom"
              Margin="32 8 8 16" Opacity="0.75">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="Auto"/>
                <ColumnDefinition/>
            </Grid.ColumnDefinitions>
            <materialDesign:PackIcon Kind="BulbOnOutline" VerticalAlignment="Center"
                                     Grid.Column="0"/>
            <TextBlock Text="{Binding ViewModel.CurrentEchoCaveText}"
                       Grid.Column="1"
                       TextWrapping="Wrap"
                       FontWeight="Regular"
                       VerticalAlignment="Center"
                       Margin="4 0 0 0"/>
        </Grid>

        <!-- Frame 内容区域 -->
        <Frame Content="{Binding ViewModel.FrameContent}"
               Background="{DynamicResource MaterialDesignPaper}"
               NavigationUIVisibility="Hidden"
               x:Name="NavigationFrame" RenderTransformOrigin="0.5,0.5">
            <Frame.RenderTransform>
                <TransformGroup>
                    <ScaleTransform />
                    <SkewTransform />
                    <RotateTransform />
                    <TranslateTransform X="0" />
                </TransformGroup>
            </Frame.RenderTransform>
        </Frame>

        <!-- 顶部工具栏区域 -->
        <materialDesign:ColorZone Grid.Column="0" Grid.Row="0" Padding="16"
                                  Mode="PrimaryMid"
                                  materialDesign:ElevationAssist.Elevation="Dp4"
                                  Margin="0 0 0 4">
            <Grid Margin="4 0 4 0">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto" />
                    <ColumnDefinition Width="Auto" />
                    <ColumnDefinition />
                </Grid.ColumnDefinitions>

                <!-- 左侧按钮区域 -->
                <StackPanel Orientation="Horizontal" Grid.Column="0" VerticalAlignment="Center" Margin="0 -16">
                    <Button ToolTip="返回"
                            Margin="0 0 16 0"
                            VerticalAlignment="Center"
                            Padding="0"
                            Click="ButtonGoBack_OnClick"
                            Visibility="{Binding ViewModel.CanGoBack, Converter={StaticResource BooleanToVisibilityConverter}}"
                            Style="{StaticResource MaterialDesignToolForegroundButton}"
                            Content="{materialDesign:PackIcon ArrowLeft, Size=24}" />
                    <Button ToolTip="导航栏"
                            Margin="0 0 16 0"
                            VerticalAlignment="Center"
                            Padding="0"
                            Visibility="{Binding ViewModel.IsViewCompressed, Converter={StaticResource BooleanToVisibilityConverter}}"
                            Style="{StaticResource MaterialDesignToolForegroundButton}"
                            Click="ButtonBaseToggleNavigationDrawer_OnClick"
                            Content="{materialDesign:PackIcon Menu, Size=24}" />
                </StackPanel>

                <!-- 标题区域 -->
                <StackPanel Orientation="Horizontal" Grid.Column="1">
                    <TextBlock Text="What the hell??"
                               Style="{StaticResource MaterialDesignHeadline6TextBlock}"
                               HorizontalAlignment="Left"
                               VerticalAlignment="Center" />
                </StackPanel>

                <!-- 右侧区域 -->
                <StackPanel Grid.Column="2" Orientation="Horizontal" HorizontalAlignment="Right">
                    <StackPanel.Resources>
                        <Style TargetType="materialDesign:Chip"
                               BasedOn="{StaticResource MaterialDesignOutlineChip}">
                            <Setter Property="Foreground"
                                    Value="{Binding RelativeSource={RelativeSource AncestorType={x:Type FrameworkElement}}, Path=(TextElement.Foreground)}" />
                            <Setter Property="BorderBrush"
                                    Value="{Binding RelativeSource={RelativeSource AncestorType={x:Type FrameworkElement}}, Path=(TextElement.Foreground), Converter={StaticResource SolidColorBrushOpacityConverter}, ConverterParameter=0.5, Mode=OneWay}" />
                            <Setter Property="IconForeground" Value="{DynamicResource MaterialDesignBody}" />
                            <Setter Property="IconBackground"
                                    Value="{Binding RelativeSource={RelativeSource AncestorType={x:Type FrameworkElement}}, Path=(TextElement.Foreground), Converter={StaticResource SolidColorBrushOpacityConverter}, ConverterParameter=0.5, Mode=OneWay}" />
                            <Setter Property="Margin" Value="0 -8 6 -8" />
                        </Style>
                    </StackPanel.Resources>
                </StackPanel>
            </Grid>
        </materialDesign:ColorZone>

        <Button
            Content="ButtonW"
            IsEnabled="{Binding DataContext.ControlsEnabled, RelativeSource={RelativeSource FindAncestor, AncestorType=Window}}"
            Style="{StaticResource MaterialDesignRaisedSecondaryButton}"
            ToolTip="Resource name: MaterialDesignRaisedSecondaryButton" Margin="32,90,0,0" HorizontalAlignment="Left" Width="120" Height="32" VerticalAlignment="Top" />
    </Grid>
</Window>
